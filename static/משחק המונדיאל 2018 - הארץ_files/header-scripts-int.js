"use strict";function setCookie(a,b,c,d){return CookieUtil.setCookie(a,b,c,d)}function getCookie(a){return CookieUtil.getCookie(a)}function nonEmpty(a){return"SELECT"==$(a).prop("tagName")?"סוג המינוי"!=a.val()&&"בחר עמותה"!=a.val()&&"בחר"!=a.val()&&""!=a.val():a.val().length>0}function minLength(a){var b=parseInt(a.attr("data-minLength"));return isNaN(b)&&(b=0),a.val().length>=b}function validName(a){return isValidName(a.val())}function validPhone(a){return isValidPhone(a.val())}function validCrm(a){return isValidCrm(a.val())}function validEmail(a){return isValidEmail(a.val())}function matchField(a,b){var c=!1,d=a.attr("data-matchTo");if(void 0!==d){var e=b.find("[name="+d+"]");e.length>0&&(e.val(e.val().trim()),c=a.val()==e.val())}return c}function reasonableDates(a,b){var c=!1,d=a.attr("data-reasonableTo");if(void 0!==d){var e=b.find("[name="+d+"]");if(e.length>0){var f=a.val().split("/"),g=parseInt(f[2]+f[1]+f[0]),h=e.val().split("/"),i=parseInt(h[2]+h[1]+h[0]);0==isNaN(g)&&0==isNaN(i)?c=g<=i:0==isNaN(g)&&(c=!0)}}return c}function rightDate(a){var b=!1,c=a.val(),d=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,e=!!window.chrome&&!!window.chrome.webstore;if(10==c.length){(e||d)&&(c=c.substr(3,2)+"/"+c.substr(0,2)+"/"+c.substr(6,4));var f=Date.parse(c);0==isNaN(f)&&(b=!0)}return b}function checked(a){return a.prop("checked")}function isValidEmail(a){var b=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;return a.search(b)!=-1&&a.length<64}function isValidName(a){var b=/^[-' A-Za-zא-ת- ]{2,40}$/;return a.search(b)!=-1}function isValidPhone(a){var b=/^(\s*|[1-9]\d{6})$/;return a.search(b)!=-1}function isValidCrm(a){var b=/^(\s*|[1-9]\d{5,6})$/;return a.search(b)!=-1}!function(a){function b(a){var b,c;try{b=JSON.parse(a)}catch(d){try{c=new Function("return "+a),b=c()}catch(d){f("Failed secondary JSON parse",!0)}}return b}function c(a){return"function"==typeof a}function d(a,b){var c,d,e=b,f=document;if(d=f.createElement(a),e)for(c in e)e.hasOwnProperty(c)&&d.setAttribute(c,e[c]);return d}function e(a,b,c){s?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)}function f(b,c){(t.debug||c)&&a.console&&a.console.log&&(c?console.error("[ABD] "+b):console.log("[ABD] "+b))}function g(a){f("start beginTest"),1!=B&&(r=!0,h(a),A.quick="testing",C.test=setTimeout(function(){i(a,1)},5))}function h(a){var b,c,e=document,g=e.body,h="width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;";if(null==a||"string"==typeof a)return void f("invalid bait being cast");for(null!=a.style&&(h+=a.style),w=d("div",{"class":a.cssClass,style:h}),f("adding bait node to DOM"),g.appendChild(w),b=0;b<y.nullProps.length;b++)c=w[y.nullProps[b]];for(b=0;b<y.zeroProps.length;b++)c=w[y.zeroProps[b]]}function i(a,b){var c,d=document.body,e=!1;if(null==w&&(f("recast bait"),h(a||x)),"string"==typeof a)return f("invalid bait used",!0),void(j()&&setTimeout(function(){r=!1},5));for(C.test>0&&(clearTimeout(C.test),C.test=0),null!==d.getAttribute("abp")&&(f("found adblock body attribute"),e=!0),c=0;c<y.nullProps.length;c++){if(null==w[y.nullProps[c]]){e=!0,f("found adblock null attr: "+y.nullProps[c]);break}if(1==e)break}for(c=0;c<y.zeroProps.length&&1!=e;c++)0==w[y.zeroProps[c]]&&(e=!0,f("found adblock zero attr: "+y.zeroProps[c]));if(void 0!==window.getComputedStyle){var g=window.getComputedStyle(w,null);"none"!=g.getPropertyValue("display")&&"hidden"!=g.getPropertyValue("visibility")||(e=!0,f("found adblock computedStyle indicator"))}q=!0,e||b++>=t.maxLoop?(B=e,f("exiting test loop - value: "+B),k(),j()&&setTimeout(function(){r=!1},5)):C.test=setTimeout(function(){i(a,b)},t.loopDelay)}function j(){if(null===w)return!0;try{c(w.remove)&&w.remove(),document.body.removeChild(w)}catch(a){}return w=null,!0}function k(){var a,b;if(null!==B)for(a=0;a<v.length;a++){b=v[a];try{null!=b&&(c(b.complete)&&b.complete(B),B&&c(b.found)?b.found():B===!1&&c(b.notfound)&&b.notfound())}catch(d){f("Failure in notify listeners "+d.Message,!0)}}}function l(){var b,c=!1;document.readyState&&"complete"==document.readyState&&(c=!0),b=function(){g(x,!1)},c?b():e(a,"load",b)}var m="1.0",n="offset",o="client",p=function(){},q=!1,r=!1,s=void 0===a.addEventListener,t={loopDelay:50,maxLoop:5,debug:!0,found:p,notfound:p,complete:p},u=function(){var a={};this.addUrl=function(b){return a[b]={url:b,state:"pending",format:null,data:null,result:null},a[b]},this.setResult=function(c,d,e){var f=a[c];if(null==f&&(f=this.addUrl(c)),f.state=d,null==e)return void(f.result=null);if("string"==typeof e)try{e=b(e),f.format="json"}catch(g){f.format="easylist"}return f.data=e,f}},v=[],w=null,x={cssClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links"},y={nullProps:[n+"Parent"],zeroProps:[]};y.zeroProps=[n+"Height",n+"Left",n+"Top",n+"Width",n+"Height",o+"Height",o+"Width"];var z,A={quick:null,remote:null},B=null,C={test:0,download:0},D={version:m,init:function(a){var b,c;if(a){c={complete:p,found:p,notfound:p};for(b in a)a.hasOwnProperty(b)&&("complete"==b||"found"==b||"notFound"==b?c[b.toLowerCase()]=a[b]:t[b]=a[b]);v.push(c),z=new u,l()}}};a.adblockDetector=D}(window);var CookieUtil=function(){function a(){i||(g=c(),h=document.cookie),i=!0}function b(a,b){for(var c=a.split(b),d={},e=0;e<c.length;e++){var f=c[e].split("=");d[f[0]]=decodeURIComponent(f[1])}return d}function c(){var a=b(document.cookie,/;\s?/);return a.tmsso&&(a.tmsso=b(a.tmsso,":")),a}function d(a){var b=a.split("."),c=null;if(c=g[b[0]],"object"==typeof c)for(var d=1,e=b.length;d<e;d++)var c=c[b[d]];return c}function e(a,b,d,e,f){var h=[],i=f||new Date(Date.now()+31536e6);h.push(a+"="+encodeURIComponent(b)),d&&h.push("path="+d),e&&h.push("domain="+e),h.push("expires="+i.toUTCString()),document.cookie=h.join(";"),g=c()}function f(a,b,d){var e=[],f=new Date;f.setTime(f.getTime()+-864e5),e.push(a+"="),b&&e.push("path="+encodeURIComponent(b)),d&&e.push("domain="+encodeURIComponent(d)),e.push("expires="+f.toUTCString()),document.cookie=e.join(";"),g=c()}var g=null,h=null,i=!1;return a(),{getCookie:function(a){return d(a)},setCookie:function(a,b,c,d,f){e(a,b,c,d,f)},deleteCookie:function(a,b,c){f(a,b,c)},getCookieMap:function(){return c()},reinit:function(){h!=document.cookie&&(i=!1,a())}}}(),AdBlockUtil=function(){function a(){if("undefined"!=typeof i&&i()){$("<div/>",{"class":"modal-wrapper modal-wrapper--fixed modal-wrapper--dark",style:"display: none",id:"ad-block-wrapper"})}document.location.href.indexOf("haaretz.co.il")<0||b()}function b(a){localStorage.hasAdBlock=localStorage.hasAdBlock||!1,window.showAds?(localStorage.hasAdBlock=!1,m=!1,"undefined"!=typeof a&&a===!1||l()):(localStorage.hasAdBlock=!0,m=!0,"undefined"!=typeof a&&a===!1||l())}function c(){CookieUtil.reinit();var a=CookieUtil.getCookieMap(),b=a.tmsso?"registered":"anonymous";return a.HtzPusr?"paying":b}function d(){return document.location.href.indexOf("/hblocked")>0||document.location.href.indexOf("/vblocked")>0}function e(){return"undefined"!=typeof isInHomePage&&isInHomePage||d()||document.location.href.indexOf("/promotions")>0||document.location.href.indexOf("/login-page")>0}function f(){return document.documentElement.classList.contains("article-page")}function g(){try{return void 0!==window.q&&void 0!==window.q.adManager&&Array.prototype.some.call(Array.from(q.adManager.adSlots.values()),function(a){return void 0!==a.lastResolvedSize})}catch(a){return!0}}function h(){return!!window.location.href.toLowerCase().match("push_notification")}function i(a){if("paying"!=c()&&(!f()||"undefined"!=typeof a&&1==a)&&"undefined"!=typeof CookieUtil.getCookie("adblockRedirect")&&"false"!=localStorage.hasAdBlock&&!h()){var b=(new Date).getTime();if(localStorage.adblock){var d=JSON.parse(localStorage.adblock),e=d.startDateTimeForRedirect,g=d.startDateTimeForHoudini,i=Math.floor((b-e)/864e5),j=Math.floor((b-g)/864e5);return i<7||j>28&&(localStorage.adblock=JSON.stringify({startDateTimeForRedirect:b,startDateTimeForHoudini:b}),!0)}return localStorage.adblock=JSON.stringify({startDateTimeForRedirect:b,startDateTimeForHoudini:b}),!0}return!1}function j(){var a=document.referrer;""==a?document.location.href="/":document.location.href=a}function k(a,b){var c=encodeURIComponent(document.location.href),d="Rusr=";"undefined"!=typeof CookieUtil.getCookie("HtzRusr")&&(d+=CookieUtil.getCookie("HtzRusr"));var e="Pusr=";"undefined"!=typeof CookieUtil.getCookie("HtzPusr")&&(e+=CookieUtil.getCookie("HtzPusr"));var f="https://ds.haaretz.co.il/dstest.php?";c.indexOf("www.haaretz.co.il")>=0&&(f="https://ds.haaretz.co.il/ds.php?");var g="domain="+window.location.hostname,h="url="+c,i="userId=";if("undefined"!=typeof CookieUtil.getCookie("tmsso"))i+=CookieUtil.getCookie("tmsso").userId;else{if("undefined"==typeof CookieUtil.getCookie("anonymousId"))return;i+=CookieUtil.getCookie("anonymousId")}var j=h+"&"+g+"&"+d+"&"+e+"&"+i+"&actionType="+a;jQuery.ajax({url:f+j,dataType:"text",type:"GET",success:b})}function l(a){if("undefined"==typeof CookieUtil.getCookie("skipAdblockRedirect")){if(d()){$(window).on("beforeunload",function(){k(18,null)}),$("#go_to_purchase").click(function(){k(17,function(){$(window).off("beforeunload"),document.location.href="https://www.haaretz.co.il/promotions-page"})});var b=document.referrer;""!=b?($("#adblock_returnto").click(function(){$(window).off("beforeunload"),document.location.href=b}),$("#go_to_login").click(function(){k(16,function(){$(window).off("beforeunload"),document.location.href="/misc/login-page?returnTo="+encodeURIComponent(b)})}),$(".js-login").attr("href","#"),$(".js-login").click(function(){k(16,function(){$(window).off("beforeunload"),document.location.href="/misc/login-page?returnTo="+encodeURIComponent(b)})})):($("#adblock_returnto").click(function(){$(window).off("beforeunload"),document.location.href=""}),$("#go_to_login").click(function(){k(16,function(){$(window).off("beforeunload"),document.location.href="/misc/login-page"})}),$(".js-login").attr("href","#"),$(".js-login").click(function(){k(16,function(){$(window).off("beforeunload"),document.location.href="/misc/login-page"})}))}if(!m||m&&g())$("#ad-block-wrapper").hide(),"undefined"==typeof CookieUtil.getCookie("adblockRedirect")||d()||(CookieUtil.setCookie("adblockRedirect","hblocked","/","haaretz.co.il",new Date),CookieUtil.deleteCookie("adblockRedirect","/","haaretz.co.il"),localStorage.adblock_removed=!0,k(15,function(){d()&&$(window).off("beforeunload")}));else if(localStorage.adblock_removed=!1,"paying"==c()){if(!d())return;j()}else{if(e())return;if("paying"!=c()&&(!f()||"undefined"!=typeof a&&1==a)){if(i(a))return void(document.location.href="/"+CookieUtil.getCookie("adblockRedirect")+"?returnTo="+encodeURIComponent(document.location.href));if("undefined"==typeof CookieUtil.getCookie("adblockRedirect")){var h=Math.random();if(h<n/100){var l=Date.now()+7776e6,o=new Date(l);CookieUtil.setCookie("adblockRedirect","hblocked","/","haaretz.co.il",o),document.location.href="/hblocked?returnTo="+encodeURIComponent(document.location.href)}else{var l=Date.now()+2592e5,o=new Date(l);CookieUtil.setCookie("skipAdblockRedirect","true","/","haaretz.co.il",o)}}else{var l=Date.now(),o=new Date(l);CookieUtil.setCookie("skipAdblockRedirect","true","/","haaretz.co.il",o)}}}}}try{var m=!1,n=window.redirectProbabilityPercentTest||99,o=encodeURIComponent(document.location.href);return o.indexOf("haaretz.co.il")>=0&&(n=window.redirectProbabilityPercentProd||0),{checkRedirect:function(){a()},isOnBlockedPage:function(){return d()},isBannerExistOnPage:function(){return g()},isAdBlockEnabled:function(){return m},shouldRedirectToBlockPage:function(){return i()},checkRedirectAfterAdBlockDetection:function(a){return l(a)},isHoudiniDetectBlocker:function(a){return b(a),m}}}catch(p){console.log("ad block error - "+p)}}();window.addEventListener("DOMContentLoaded",function(){try{var a=Array.from(document.querySelectorAll(".clickTrackerwrapper"));a.forEach(function(a){try{var b=a.querySelector(".clickTrackerwrapperPlaceHolder"),c=parseFloat(b.getAttribute("data-totalRang")),d=Math.random()*c,e=Array.from(a.querySelectorAll("script[data-chance]")),f=e.find(function(a){var b=parseFloat(a.getAttribute("data-minRang")),c=parseFloat(a.getAttribute("data-maxRang"));return d>b&&d<c});b.innerHTML=f.innerHTML,window.q&&window.q.wasInitialized||b.querySelector("a").setAttribute("target","_self")}catch(g){console.log("Error on clickTracker - "+g)}})}catch(b){console.log("Error on clicktrackerWrapperContainer - "+b)}});var bannersUtil=function(){function a(){return["haaretz.co.il.web.ruler","haaretz.co.il.web.halfpage.floating_x"]}function b(){try{if(UserUtil.getLoginInfo().id){var a=UserUtil.getLoginInfo().id;$.ajax({cache:!1,url:ssoDomain+"/sso/r/proposalType?ssoid="+a,type:"GET",success:function(a){a&&a.type&&(localStorage.proposaltype=a.type)},error:function(){},timeout:2e4})}}catch(b){console.log("Error on _checkuserType util - "+b)}}var c=[],d="";return{checkuserType:b,bannersSendRequestToDfp:c,isPlazmaTypeOfTapet:d,getArrayOfConfictedBanners:a}}();window.addEventListener("DOMContentLoaded",function(){function a(a){var b=q.adManager.adSlots.get(a),c=q.adManager.shouldSendRequestToDfp(b);return c&&bannersUtil.bannersSendRequestToDfp.push(a),c}try{var b=bannersUtil.getArrayOfConfictedBanners();b.forEach(function(b){a(b)})}catch(c){console.log("Error on rulerEvent - "+c)}window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[],googletag.cmd.push(function(){var a=window.googletag.pubads();a.addEventListener("slotRenderEnded",function(a){var b=a.slot.getAdUnitPath().split("/")[3],c=a.isEmpty,d=a.size;if(c||"haaretz.co.il.web.inread"!==b||"336,280"!=d.toString()&&"300,251"!=d.toString()){if($.inArray(b,bannersUtil.bannersSendRequestToDfp)>-1&&c){var e=bannersUtil.bannersSendRequestToDfp.indexOf(b);if(e!=-1&&bannersUtil.bannersSendRequestToDfp.splice(i,1),0==bannersUtil.bannersSendRequestToDfp.length&&"regular"==bannersUtil.plazmeType){var a=new Event("noDFPConflictWithAlertsDetected");window.dispatchEvent(a)}}else if("haaretz.co.il.web.plazma"===b&&"980, 190"!=d.toString()&&"3,3"!=d.toString()){var a=new Event("noDFPConflictWithPopUPDetected");if(window.dispatchEvent(a),bannersUtil.plazmeType="regular",0==bannersUtil.bannersSendRequestToDfp.length){var a=new Event("noDFPConflictWithAlertsDetected");window.dispatchEvent(a)}}}else{var f=document.getElementById(b);f.className+=" advert__content--c "}try{var g="https://s8e5n3x8.map2.ssl.hwcdn.net",h=a.slot.j._html_;h.indexOf(g)>=0&&document.getElementById(b).classList.remove("advert__content--c")}catch(j){}})})}),window.addEventListener("load",function(){function a(a,c){try{if(q.adManager.adSlots.get(a)){var d=setInterval(function(){q.adManager.refreshSlot(a)},c);b.push(d)}}catch(e){console.log("Error on refreshMySlot - "+e)}}try{var b=[],c=q.adManager.config.adSlotConfig,d=30,e=1e3;for(var f in c)if(c.hasOwnProperty(f)&&c[f].refreshTime>d&&q.adManager.refreshSlot){var g=parseInt(c[f].refreshTime)*e,h=c[f].id;a(h,g)}}catch(i){console.log("Error on refreshDfpBanner - "+i)}}),window.addEventListener("load",function(){try{UserUtil.getLoginInfo()&&"paying"==UserUtil.getLoginInfo().userType&&schedulerUtil.runOnceAday("bannersUtil",bannersUtil.checkuserType)}catch(a){console.log("Error on checkuserType - "+a)}});var FV=function(){this.setErrorsMessages=function(a){this.errorMessages=a},this.appendToErrorMessages=function(a,b,c){null==this.errorMessages[a]&&(this.errorMessages[a]={}),null==this.errorMessages[a][b]&&(this.errorMessages[a][b]=c)},this.errorMessages={},this.addErrorMessageToField=function(a,b,c){var d=b.attr("name"),e="";null!=this.errorMessages[d]&&null!=this.errorMessages[d][c]&&(e=this.errorMessages[d][c]),a.html(e)},this.removeErrorMessageFromField=function(a){a.html("")},this.validate=function(a,b,c,d,e){var f=b.closest(".js-validation-wrapper"),g=f.find(".js-validation-message"),h=f.find(".js-validation-error");b.val(b.val().trim());var i=a.attr("data-general-error-element"),j=void 0!==i&&"true"==i;j&&(h=a.find(".js-general-error"),a.find(".js-validation-wrapper").removeClass("form-is-error"));var k=a.attr("data-toggleMessageOnerror"),l=void 0!==k&&"true"==k,m=e(b,a);return m?this.removeErrorMessageFromField(h):this.addErrorMessageToField(h,b,c),void 0!==d&&"true"==d&&(m?f.removeClass("form-is-error"):f.addClass("form-is-error")),l&&(m?g.removeClass("hide"):g.addClass("hide")),m?h.addClass("hide"):h.removeClass("hide"),m},this.formValidation=function(a){a instanceof jQuery||(a=$(a));for(var b=!0,c=a.find("input,select"),d=a.attr("data-highlightInputOnError"),e=a.attr("data-general-error-element"),f=void 0!==e&&"true"==e,g=!1,h=0;h<c.length;h++){c[h].name;if(null==c[h].getAttribute("data-skip")||"true"!=c[h].getAttribute("data-skip")){if(null!=c[h].getAttribute("data-dependent")){var i=c[h].getAttribute("data-dependent"),j=a.find("[name="+i+"]");if(""!=c[h].value){var k=j.attr("data-validationFunctions");if(void 0!==k){var l=k.split(";"),m=j.attr("data-validationMessages");if(void 0!==m){var n=m.split(";");if(n.length==l.length)for(var o=0;o<l.length;o++){var p=window[l[o]];if("function"==typeof p){var q=n[o];if(!this.validate(a,j,q,d,p)){b=!1;break}}}}}}else{var r=j.closest(".js-validation-wrapper").find(".js-validation-error");j.closest(".js-validation-wrapper").removeClass("form-is-error"),this.removeErrorMessageFromField(r)}}var k=c[h].getAttribute("data-validationFunctions");if(null!=k){var l=k.split(";"),m=c[h].getAttribute("data-validationMessages");if(null!=m){var n=m.split(";");if(n.length==l.length)for(var o=0;o<l.length;o++){var p=window[l[o]];if("function"==typeof p){var q=n[o];if(!this.validate(a,$(c[h]),q,d,p)){b=!1,g?callErrorAccesability(a,c[h],b,!1,!1):(g=!0,callErrorAccesability(a,c[h],b,!0,!1));break}callErrorAccesability(a,c[h],b,!1,!1)}}}}if(!b&&f)return!1}}return b}};
//# sourceMappingURL=head-scripts-int.js.map